<div class="row">
  <h3>My Plans</h3>
</div>

<div class="row">
    <a class="waves-effect waves-light btn" [routerLink]="'create'">
      <i class="material-icons right">add</i>New Plan
    </a>
</div>
<div class="row">
    <table class="highlight">
      <thead>
        <tr>
            <th>Name</th>
            <th>Version</th>
            <th>State</th>
            <th>Actions</th>
        </tr>
      </thead>

      <tbody *ngIf="!loading && plans.length > 0">
        <tr *ngFor="let plan of plans; let idx = index" >
          <td>{{ plan.name }}</td>
          <td>{{ plan.version }}</td>
          <td>{{ getEnumValue(plan.state) }}</td>
          <td [ngSwitch]="plan.state">
            <i class="material-icons action-icon" materialize="tooltip" data-position="bottom" data-delay="50" data-tooltip="Open" [routerLink]="[plan.id, 'workspace']">
              folder_open
            </i>

            <span *ngSwitchCase="'ReadyToReview'">
              <i class="material-icons action-icon" materialize="tooltip" data-position="bottom" data-delay="50" data-tooltip="Create review" [routerLink]="['/', 'reviews', 'create', plan.id]">
                add_circle_outline
              </i>

              <i class="material-icons action-icon" materialize="tooltip" data-position="bottom" data-delay="50" data-tooltip="Delete" (click)="removePlan(plan, idx)">
                delete
              </i>
            </span>

            <span *ngSwitchCase="'Completed'">
              <i class="material-icons action-icon" materialize="tooltip" data-position="bottom" data-delay="50" data-tooltip="Show reviews" [routerLink]="[plan.id, 'reviews']">
                comment
              </i>
            </span>

            <span class="action-buttons" *ngSwitchCase="'Planning'">
              <i class="material-icons action-icon" materialize="tooltip" data-position="bottom" data-delay="50" data-tooltip="Edit" [routerLink]="['edit', plan.id]">
                create
              </i>

              <i class="material-icons action-icon" materialize="tooltip" data-position="bottom" data-delay="50" data-tooltip="Delete" (click)="removePlan(plan, idx)">
                delete
              </i>
            </span>
          </td>
        </tr>
      </tbody>

      <tr class="empty-table" *ngIf="!loading && plans.length === 0">
        <td colspan="4">Nothing to show.</td>
      </tr>
    </table>
    <div class="loading-data" *ngIf="loading">
      <app-spinner></app-spinner>
    </div>
</div>
